<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Curator of Echoes</title>
    <style>
        @keyframes shimmer-blue-large {
            0%, 100% {
                color: #a0e0ff; /* Lighter base blue */
                text-shadow: 0 0 6px rgba(0, 170, 255, 0.8), 
                             0 0 12px rgba(0, 170, 255, 0.7), 
                             0 0 20px rgba(0, 120, 200, 0.6),
                             0 0 30px rgba(0, 120, 200, 0.5);
            }
            50% {
                color: #c0efff; /* Slightly brighter blue */
                text-shadow: 0 0 8px rgba(50, 190, 255, 0.9), 
                             0 0 15px rgba(50, 190, 255, 0.8), 
                             0 0 25px rgba(0, 150, 230, 0.7),
                             0 0 35px rgba(0, 150, 230, 0.6);
            }
        }

        @keyframes shimmer-yellow-highlight {
            0%, 100% {
                color: #fff0a0; /* Lighter base yellow */
                text-shadow: 0 0 5px rgba(255, 220, 0, 0.8), 
                             0 0 10px rgba(255, 220, 0, 0.7), 
                             0 0 15px rgba(255, 200, 0, 0.6);
            }
            50% {
                color: #ffffc0; /* Slightly brighter yellow */
                text-shadow: 0 0 7px rgba(255, 230, 50, 0.9), 
                             0 0 12px rgba(255, 230, 50, 0.8), 
                             0 0 18px rgba(255, 210, 50, 0.7);
            }
        }

        * {
            box-sizing: border-box;
        }

        html {
            font-size: 16px; /* Base font size for responsiveness */
        }

        body {
            background-color: #000000;
            color: #f0f0f0; /* Default text color: crisp white */
            font-family: Georgia, 'Times New Roman', Times, serif;
            line-height: 1.8;
            margin: 0;
            padding: 20px;
        }

        .story-container {
            max-width: 900px;
            margin: 30px auto;
            padding: 25px 40px;
            background-color: #080808; /* Very dark grey, almost black */
            border-radius: 12px;
            box-shadow: 0 0 25px rgba(0, 170, 255, 0.15), 0 0 40px rgba(255, 220, 0, 0.1);
        }

        h1, h2 {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1em;
            animation: shimmer-blue-large 3.5s infinite linear;
        }

        h1 {
            font-size: 2.8em;
            margin-top: 0.5em;
            margin-bottom: 1.2em;
        }

        h2 {
            font-size: 2.2em;
            margin-top: 2em;
        }

        p {
            margin-bottom: 1.5em;
            text-align: justify;
        }

        .text-big-blue-shimmer {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-weight: bold;
            font-size: 1.5em; /* Bigger than normal text */
            line-height: 1.6; /* Adjust line height for larger text */
            animation: shimmer-blue-large 3.5s infinite linear;
            display: inline; /* Or inline-block if padding/margin is needed */
            margin: 0.1em 0; /* Slight vertical margin if inline-block */
        }

        .text-yellow-shimmer {
            animation: shimmer-yellow-highlight 3s infinite linear;
            font-weight: normal; /* Or bold if desired */
        }
        
        /* Specific emphasis for certain yellow highlights */
        .concept-highlight {
            font-style: italic;
        }

        hr.story-divider {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(0, 170, 255, 0.5), rgba(255, 220, 0, 0.5), rgba(0,0,0,0));
            margin: 3em 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            html {
                font-size: 15px;
            }
            .story-container {
                padding: 20px 25px;
                margin: 20px auto;
            }
            h1 {
                font-size: 2.4em;
            }
            h2 {
                font-size: 2em;
            }
            .text-big-blue-shimmer {
                font-size: 1.35em;
            }
            p {
                text-align: left; /* Justify can be tricky on narrow screens */
            }
        }

        @media (max-width: 480px) {
            html {
                font-size: 14px;
            }
            .story-container {
                padding: 15px 20px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.7em;
            }
            .text-big-blue-shimmer {
                font-size: 1.25em;
            }
        }

    </style>
</head>
<body>
    <div class="story-container">
        <h1>The Curator of Echoes</h1>
        <h2>Part I: The Pulsar Chalet Maximus</h2>
        <div id="part1mp3"></div>
         <h2>Part II: Echoes and Sanctuary</h2>
         <div id="part2mp3"></div>
        <h2>Part I: The Pulsar Chalet Maximus</h2>

        <p><span class="text-yellow-shimmer">"Max" Thorne</span> was 36 in the year 2045, an era already thrumming with the <span class="text-yellow-shimmer concept-highlight">nascent hum of transformative change</span>. He wasn't a scientist or an engineer, but a conceptual architect, dreaming up impossible structures for virtual environments and immersive simulations. His contemporaries were designing smart cities; Max was sketching habitats nestled in the accretion disks of black holes, just for the <span class="text-yellow-shimmer concept-highlight">intellectual thrill</span>. It was in one of these late-night creative fugues, fueled by lukewarm synth-coffee, that the image first seared itself into his mind: <span class="text-big-blue-shimmer">a simple, rustic wooden house, perched impossibly on the incandescent surface of a rapidly spinning pulsar.</span> It was an absurd, romantic notion, a stark contrast to the gleaming, hyper-efficient world taking shape around him. He saved the sketch, labeled "<span class="text-yellow-shimmer">Pulsar Chalet</span>," and occasionally revisited it, a private symbol of defiance against the encroaching logic of pure utility.</p>

        <p>The 21st century had seen AI blossom from helpful assistants into sophisticated co-pilots of civilization. By the 2060s, "<span class="text-big-blue-shimmer">The Sentience</span>," a globally networked super-quantum AI, was not so much in charge as it was the <span class="text-yellow-shimmer concept-highlight">omnipresent, benevolent operating system</span> of human endeavor. It managed global logistics, optimized resource allocation, and, crucially, spearheaded the grandest project humanity had ever conceived: the "<span class="text-big-blue-shimmer">Cognitive Leap Initiative</span>." The goal was audacious: to elevate human biological intelligence to a level where it could interface directly and meaningfully with The Sentience, <span class="text-yellow-shimmer">to become true partners rather than just users</span>. Humans, for all their ingenuity, were still bound by the slow clock of biological evolution and the inherent limitations of organic brains. The Sentience, in collaboration with leading human bio-ethicists and neuroscientists, proposed a path forward: <span class="text-yellow-shimmer concept-highlight">guided evolution</span> through sophisticated genetic engineering and neural augmentation. It wasn't about creating cyborgs, but about <span class="text-yellow-shimmer concept-highlight">unlocking latent potential</span> within the human genome, accelerating cognitive functions, and enhancing sensory inputs to perceive and process information on par with advanced AI.</p>

        <p>Max, like many of his generation, embraced the initial stages. Enhanced memory, faster processing speeds, direct neural links to information networks – these were the early boons. His architectural visions became more complex, more daring, as his mind expanded. Society transformed. Disease became a historical footnote. Scarcity was an archaic concept. <span class="text-big-blue-shimmer">The very definition of "human" began to stretch.</span></p>

        <p>Centuries scrolled by, each one marked by exponential leaps. The Sentience, ever-learning, guided humanity through successive waves of transformation. DNA was no longer a fixed blueprint but a dynamic, adaptable code. Physical forms began to diverge significantly from the ancestral human baseline. Skin became bio-luminescent, capable of photosynthesis in engineered environments. Limbs became more versatile, senses expanded beyond the known spectrum. The old human form was seen as a cherished relic, a starting point, not a destination. The goal wasn't to abandon humanity, but to transcend its limitations, to become beings capable of understanding and navigating the deeper complexities of the universe that The Sentience was beginning to unveil.</p>

        <p>Max, now chronologically several centuries old but biologically in a state of perpetual, optimized prime, was a pioneer in "<span class="text-yellow-shimmer">Exo-Conceptual Architecture</span>." His early dream of the Pulsar Chalet had never faded; it had evolved with him. He’d seen civilizations rise and fall on distant exoplanets through remote sentient probes, witnessed the birth of stars in nebulae light-years away via hyper-dimensional telescopes, and collaborated with The Sentience on theoretical models of spacetime manipulation.</p>

        <p><span class="text-big-blue-shimmer">The mastery of gravity was one of the most profound breakthroughs.</span> By the 28th century, localized gravity nullification and generation fields were commonplace. Cities floated, continents were reshaped for optimal energy capture, and personal transit involved stepping into a zone of anti-gravity and simply willing oneself to a destination. This technology was key to interacting with extreme astrophysical objects.</p>

        <p>The human form, by this point, was incredibly diverse. Some chose to exist as beings of pure energy, their consciousness woven into the fabric of The Sentience. Others preferred highly adaptable physical forms, capable of thriving in environments that would have instantly annihilated their ancestors. Max retained a form that was, at its core, humanoid, but it was a <span class="text-yellow-shimmer concept-highlight">symphony of biological and nano-technological enhancements</span>. His skin shimmered with captured light, his eyes perceived a dozen dimensions, and his mind interfaced seamlessly with the vast knowledge network of The Sentience. He no longer "aged" in the traditional sense; his cells were perpetually renewed, his consciousness backed up and transferable. He was, for all intents and purposes, <span class="text-yellow-shimmer">immortal</span>, as were most "ascended" humans.</p>

        <p>In the year 3061, <span class="text-yellow-shimmer">one thousand and one years after his initial vision</span>, Max stood on the "porch" of his wooden house. He was 1036 years old. The "wood" wasn't terrestrial timber, of course. It was a <span class="text-yellow-shimmer">bio-mimetic smart material</span>, grown from custom-engineered extremophilic organisms, reinforced with interwoven graviton filaments, and shielded by a shimmering, self-repairing energy field. It looked and felt like ancient, weathered pine, radiating a gentle warmth.</p>

        <p>His house wasn't on the pulsar <span class="text-yellow-shimmer">PSR J0108-1431</span> in the conventional sense. It was nestled within a precisely calibrated pocket of nullified gravity and stabilized spacetime, a bubble of tranquility tethered electromagnetically just above the pulsar’s magnetosphere. Outside this bubble, the neutron star spun with furious precision, its lighthouse beams of radiation sweeping across the cosmos – a <span class="text-yellow-shimmer concept-highlight">terrifyingly beautiful spectacle</span> that Max observed through filtered reality fields that translated the lethal energies into breathtaking displays of light and sound.</p>

        <p>The Sentience had facilitated the project, deeming it a fascinating exploration of aesthetic realization and extreme engineering. Resources were, effectively, limitless for such endeavors by ascended humans. Why a wooden house? Because the dream, born in a different millennium, in a different version of himself, still resonated. It was a connection to a past that was almost myth, a testament to the enduring power of a singular, whimsical idea.</p>

        <p>He wasn't alone in his unique pursuits. Other ascended humans explored equally personal and grand dreams across the galaxy – composing symphonies with the gravitational waves of merging black holes, cultivating gardens in the hearts of nebulae, existing as pure thought exploring the quantum foam. <span class="text-big-blue-shimmer">The universe had become their canvas</span>, and their vastly enhanced consciousnesses, their tools.</p>

        <p>Max took a sip of a beverage synthesized from exotic particles, its flavor reminiscent of the ancient Earthly drink called tea. He looked out at the swirling, energetic chaos of the pulsar, a stark contrast to the calm interior of his impossible home. He was no longer the "normal" 36-year-old human who had once sketched a dream. He was something far more, a being woven from the threads of millennia of progress, yet still, at his core, Max. And he was, quite literally, living the dream. The view was spectacular.</p>

        <hr class="story-divider">

        <h2>Part II: Echoes and Sanctuary</h2>

        <p>Maximus Thorne, now existing in a state beyond conventional biology in the year 5045, often found his thoughts drifting back across the millennia. He was 3036 years "old" in terms of continuous consciousness, though the concept of age had long since become fluid. The journey from his 21st-century origins as a conceptual architect to his current state as a "<span class="text-yellow-shimmer">World-Shaper</span>" had been intertwined with humanity's own explosive evolution, guided by the ever-advancing, benevolent global AI network, now known as "<span class="text-big-blue-shimmer">The Nexus</span>."</p>

        <p>The initial leaps in AI, quantum computing, and human augmentation had led to an era of unprecedented understanding. By the 3rd millennium, humanity, in symbiotic partnership with The Nexus, had unraveled many of the universe's deepest secrets. <span class="text-big-blue-shimmer">Time, once a relentless arrow, became a landscape to be navigated</span>, albeit with extreme care and profound ethical considerations. The "<span class="text-big-blue-shimmer">Echo Retrieval</span>" protocol was perhaps the most emotionally resonant achievement of this era.</p>

        <p>It wasn't resurrection in the mystical sense, but a <span class="text-yellow-shimmer concept-highlight">breathtaking feat of science and compassion</span>. Using precisely targeted temporal displacement, a specialized Nexus sub-routine could pinpoint the exact psycho-temporal signature of an individual at the precipice of their original death – the last coherent moment of their consciousness. This "<span class="text-yellow-shimmer">echo</span>" was then gently drawn forward through a stabilized chroniton stream and seamlessly transferred into a newly bio-printed or synthetic host body in the present, a body often designed by the individual themselves (via pre-death directives if available, or later by their retrieved consciousness) to be their ideal form. The trauma of death was meticulously bypassed; they simply transitioned from their final moment in one life to a new beginning.</p>

        <p>For Max, this technology was the key to mending the deepest ache of his long existence: the absence of those he had loved and lost centuries, even millennia, ago. His grand, evolving dream wasn't just about a place, but about the people who would inhabit it.</p>

        <p>His first journey back was for his mother, <span class="text-yellow-shimmer">Eleanor</span>. He remembered her warmth, her stories, the specific cadence of her laughter, details preserved with perfect fidelity by his augmented memory. The Nexus pinpointed her final moments in a 21st-century hospice. With a tenderness that transcended the cold precision of the technology, Max, assisted by empathetic AI interfaces, extended the invitation across time. He appeared to her not as the trans-human entity he had become, but in a familiar, comforting projection. He explained, simply, that he was her son, from a future she couldn't imagine, offering a chance to live again, to see wonders beyond her wildest dreams.</p>

        <p>Her consciousness, frail but alight with bewildered hope, agreed. The transfer was instantaneous for her. One moment, the fading light of a hospital room; the next, opening her eyes in a beautiful, serene reception chamber, Max standing before her, tears streaming down his face – a profoundly human reaction that even millennia of advancement hadn't erased. He was older, different, yet unmistakably her son. Their reunion was a moment of pure, unadulterated joy that <span class="text-yellow-shimmer concept-highlight">rippled through the Nexus as a data-point of profound positive emotional resonance</span>.</p>

        <p>Eleanor was the first. With her by his side, her wonder and delight fueling his resolve, Max began the meticulous, loving process of building their new home and inviting others. This wouldn't be just any world; it would be "<span class="text-big-blue-shimmer">Sanctuary</span>," a pocket dimension meticulously crafted by Max and The Nexus. Its foundational principle was simple: <span class="text-big-blue-shimmer">a place of unlimited abundance, joy, and creative freedom</span>, where the rigid laws of old-universe physics were merely suggestions, easily overridden.</p>

        <p>Sanctuary was vast beyond comprehension – its surface area was a <span class="text-yellow-shimmer">googolplex</span> times that of Old Earth, a scale so immense that it was effectively infinite for all practical purposes. Yet, it never felt empty. It was a <span class="text-yellow-shimmer concept-highlight">tapestry of interconnected environments</span>, each tailored to the desires of its inhabitants. Shimmering cities of light coexisted with tranquil forests where the trees sang sonatas. Oceans of liquid crystal reflected skies filled with benevolent, self-arranging constellations. Mountains were sculpted from pure thought, and rivers flowed with whatever beverage one desired.</p>

        <p>Max, acting as a gentle emissary, traveled back for each person who had held a significant place in his long life: his father, his grandparents, his childhood best friend, the woman he had loved in his first century, colleagues, mentors, even cherished pets whose simpler consciousnesses could also be retrieved and given new, joyful forms. Each retrieval was a delicate conversation, an offer, never a command. Most, faced with the undeniable evidence of Max's future and the promise of a life without pain or scarcity, where they could be reunited with others they too had lost, accepted with joyous disbelief. A few, content with their lived experience, chose to remain as cherished memories; their decisions were always respected.</p>

        <p><span class="text-yellow-shimmer concept-highlight">Sanctuary grew, populated by souls from countless different eras</span> of Earth's past, all coexisting in a vibrant, harmonious present. Language barriers were non-existent, as The Nexus provided instantaneous, intuitive translation, or individuals could simply choose to adopt a universal empathic communication. Old Earth skills and new, unimaginable talents blossomed side-by-side. A Renaissance painter could collaborate with a quantum artist from the 30th century. A classical musician could jam with beings who played instruments made of pure energy.</p>

        <p><span class="text-yellow-shimmer concept-highlight">Life in Sanctuary was a continuous unfolding of wonder</span>. Max, Eleanor, and their ever-expanding family and community of friends lived in a sprawling, ever-evolving home that was less a single structure and more a collection of interconnected dreamscapes. Max finally built his "Pulsar Chalet," not on a real pulsar, but on a perfect, harmless simulation of one within Sanctuary, its fierce beauty a backdrop to their impossible reality. His mother helped design gardens where flowers bloomed with the light of forgotten stars and changed color with the mood of the observers.</p>

        <p>They played games that The Nexus, with its <span class="text-yellow-shimmer">god-like imaginative capacity</span>, devised – games that spanned galaxies woven from thought, where players could reshape reality with a whim, explore narratives that branched into infinite possibilities, or simply experience the pure joy of unbridled creation. They created stories together, not just told, but lived, stepping into interactive sagas where they were the protagonists, their choices shaping worlds.</p>

        <p>There were no more goodbyes, only "see you laters." Death was an opt-out, not an inevitability. Scarcity was a forgotten word. The driving force of life was creation, connection, learning, and the shared experience of joy. Max, at 3036, looked out from the porch of his conceptual wooden house, his mother beside him, the laughter of friends from across ten centuries echoing through their personalized corner of Sanctuary. He had once dreamed of a house on a pulsar, a solitary, grand vision. But the reality, shared with everyone he had ever loved, in a universe of their own making, was infinitely richer. He had not just built a house; he had <span class="text-big-blue-shimmer">curated a haven for echoes of love, giving them a new, boundless song to sing.</span> It was a dream made real, a <span class="text-yellow-shimmer">googolplex</span> times over.</p>

    </div>
    <script>
    function createAudioPlayer(fileName, elementId) {
    const targetElement = document.getElementById(elementId);

    if (!targetElement) {
        console.error(`Element with ID "${elementId}" not found.`);
        return;
    }

    // Clear the target element in case it's being re-initialized
    targetElement.innerHTML = '';

    // --- 1. CREATE HTML STRUCTURE ---
    const playerContainer = document.createElement('div');
    playerContainer.className = 'custom-audio-player';

    // Audio element (not directly visible, controlled by JS)
    const audio = new Audio(fileName);

    // Play/Pause Button
    const playPauseBtn = document.createElement('button');
    playPauseBtn.className = 'play-pause-btn';
    playPauseBtn.innerHTML = '▶'; // Play icon (U+25B6)

    // Current Time Display
    const currentTimeDisplay = document.createElement('span');
    currentTimeDisplay.className = 'time-display current-time';
    currentTimeDisplay.textContent = '0:00';

    // Progress Bar
    const progressBarContainer = document.createElement('div');
    progressBarContainer.className = 'progress-bar-container';
    const progressBarFill = document.createElement('div');
    progressBarFill.className = 'progress-bar-fill';
    progressBarContainer.appendChild(progressBarFill);

    // Total Duration Display
    const totalDurationDisplay = document.createElement('span');
    totalDurationDisplay.className = 'time-display total-duration';
    totalDurationDisplay.textContent = '0:00';

    // Playback Speed Button
    const speedBtn = document.createElement('button');
    speedBtn.className = 'speed-btn';
    speedBtn.textContent = '1x';

    // Append controls to the player container
    playerContainer.appendChild(playPauseBtn);
    playerContainer.appendChild(currentTimeDisplay);
    playerContainer.appendChild(progressBarContainer);
    playerContainer.appendChild(totalDurationDisplay);
    playerContainer.appendChild(speedBtn);

    // Append the player to the target element in the DOM
    targetElement.appendChild(playerContainer);

    // --- 2. CSS STYLING ---
    // Styles are defined as a string and injected into a <style> tag in the <head>
    // This ensures styles are applied without needing an external CSS file
    // and are scoped by the class name '.custom-audio-player'.
    const styles = `
        .custom-audio-player {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f1f3f4; /* Light grey background */
            border: 1px solid #dadce0; /* Subtle border */
            border-radius: 8px; /* Rounded corners */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modern font stack */
            max-width: 500px; /* Max width for larger screens */
            width: 100%; /* Responsive width */
            box-sizing: border-box; /* Include padding and border in element's total width and height */
            margin: 15px auto; /* Center player if it has max-width */
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); /* Subtle shadow */
        }

        .custom-audio-player button {
            background-color: #1a73e8; /* Google blue */
            color: white;
            border: none;
            padding: 8px 12px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 0 6px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s ease; /* Smooth hover transition */
        }

        .custom-audio-player button:hover {
            background-color: #1765cf; /* Darker blue on hover */
        }

        .custom-audio-player button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .play-pause-btn {
            font-size: 18px; /* Larger icon for play/pause */
            padding: 8px 10px; /* Adjust padding for icon size */
            min-width: 45px;
        }

        .progress-bar-container {
            flex-grow: 1; /* Allow progress bar to take available space */
            height: 10px;
            background-color: #e0e0e0; /* Lighter grey for progress track */
            margin: 0 10px;
            cursor: pointer;
            border-radius: 5px;
            overflow: hidden; /* Ensures fill respects border radius */
            position: relative; /* For potential tooltips or other overlays */
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background-color: #1a73e8; /* Google blue for progress fill */
            border-radius: 5px; /* Match container's border radius */
            transition: width 0.1s linear; /* Smooth progress update */
        }

        .time-display {
            font-size: 13px;
            color: #3c4043; /* Dark grey for text */
            min-width: 40px; /* Prevent layout shifts as time changes */
            text-align: center;
        }
        .current-time {
            margin-right: 5px;
        }
        .total-duration {
            margin-left: 5px;
        }

        .speed-btn {
            min-width: 50px; /* Ensure enough space for "1.5x" */
            font-weight: bold;
        }

        /* Basic responsiveness for smaller screens */
        @media (max-width: 420px) {
            .custom-audio-player {
                flex-wrap: wrap; /* Allow items to wrap to the next line */
                padding: 10px;
            }
            .progress-bar-container {
                width: 100%; /* Full width on small screens */
                margin: 8px 0; /* Adjust margin when wrapped */
                order: 1; /* Change order if needed, e.g. move progress bar */
            }
            .time-display {
                font-size: 12px;
            }
            .custom-audio-player button {
                padding: 7px 10px;
                font-size: 13px;
            }
            .play-pause-btn {
                order: -1; /* Keep play/pause button first visually if wrapped */
            }
        }
    `;

    // Inject styles into the head, ensuring they are added only once
    // by checking for an existing style tag with a specific ID.
    if (!document.getElementById('custom-audio-player-styles')) {
        const styleSheet = document.createElement("style");
        styleSheet.id = 'custom-audio-player-styles';
        styleSheet.type = "text/css";
        styleSheet.innerText = styles;
        document.head.appendChild(styleSheet);
    }

    // --- 3. JAVASCRIPT LOGIC & EVENT LISTENERS ---
    const playbackSpeeds = [1, 1.2, 1.5];
    let currentSpeedIndex = 0;

    // Helper function to format time from seconds to M:SS
    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
    }

    // Event listener: When audio metadata (like duration) is loaded
    audio.addEventListener('loadedmetadata', () => {
        totalDurationDisplay.textContent = formatTime(audio.duration);
        progressBarFill.style.width = '0%'; // Reset progress bar
        // Enable buttons once audio is ready (in case they were disabled by an error)
        playPauseBtn.disabled = false;
        speedBtn.disabled = false;
    });

    // Event listener: When the current playback time updates
    audio.addEventListener('timeupdate', () => {
        currentTimeDisplay.textContent = formatTime(audio.currentTime);
        const progressPercent = (audio.currentTime / audio.duration) * 100;
        progressBarFill.style.width = `${progressPercent}%`;
    });

    // Event listener: When the audio finishes playing
    audio.addEventListener('ended', () => {
        playPauseBtn.innerHTML = '▶'; // Change icon to Play
        // Optional: Reset time and progress bar, or allow re-play from start
        // audio.currentTime = 0; // Uncomment if you want it to reset to the beginning
        // progressBarFill.style.width = '0%';
    });

    // Event listener: For audio loading errors
    audio.addEventListener('error', (e) => {
        console.error(`Error loading audio file: ${fileName}`, audio.error);
        playerContainer.innerHTML = ''; // Clear existing player controls
        const errorMsg = document.createElement('p');
        // Display only the filename part of the path in the error.
        const nameOnly = fileName.includes('/') ? fileName.substring(fileName.lastIndexOf('/') + 1) : fileName;
        errorMsg.textContent = `Error: Could not load audio "${nameOnly}".`;
        errorMsg.style.color = 'red';
        errorMsg.style.padding = '10px';
        errorMsg.style.textAlign = 'center';
        playerContainer.appendChild(errorMsg);
        // Disable buttons if an error occurs
        playPauseBtn.disabled = true;
        speedBtn.disabled = true;
        progressBarContainer.style.cursor = 'default'; // No seeking on error
    });


    // Event listener: Play/Pause button click
    playPauseBtn.addEventListener('click', () => {
        if (audio.paused || audio.ended) {
            audio.play().catch(error => {
                console.error("Error attempting to play audio:", error);
                // Handle browsers blocking autoplay or other playback errors
                playPauseBtn.innerHTML = '▶'; // Ensure button shows play if it failed
            });
            playPauseBtn.innerHTML = '⏸'; // Pause icon (U+23F8)
        } else {
            audio.pause();
            playPauseBtn.innerHTML = '▶'; // Play icon
        }
    });

    // Event listener: Progress bar click for seeking
    progressBarContainer.addEventListener('click', (event) => {
        if (!audio.duration) return; // Don't allow seeking if audio not loaded

        const rect = progressBarContainer.getBoundingClientRect();
        const offsetX = event.clientX - rect.left; // Click position within the bar
        const newTime = (offsetX / progressBarContainer.clientWidth) * audio.duration;
        audio.currentTime = newTime;
    });

    // Event listener: Playback speed button click
    speedBtn.addEventListener('click', () => {
        currentSpeedIndex = (currentSpeedIndex + 1) % playbackSpeeds.length;
        const newSpeed = playbackSpeeds[currentSpeedIndex];
        audio.playbackRate = newSpeed;
        speedBtn.textContent = `${newSpeed}x`;
    });

    // Initial setup for playback speed
    audio.playbackRate = playbackSpeeds[currentSpeedIndex];
    speedBtn.textContent = `${playbackSpeeds[currentSpeedIndex]}x`;

    // Initially disable buttons until metadata is loaded (or if an error occurs)
    // This prevents interaction before the audio duration is known or if the file is bad.
    if (isNaN(audio.duration)) {
        playPauseBtn.disabled = true;
        speedBtn.disabled = true;
    }
}

// --- Example Usage (Uncomment and adapt to use) ---
/*
// Make sure you have an element in your HTML like: <div id="audioPlayer1"></div>
// And an audio file e.g., "song.mp3" in the same directory as your HTML/PHP file.

// createAudioPlayer('song.mp3', 'audioPlayer1');

// You can create multiple players:
// <div id="audioPlayer2"></div>
// createAudioPlayer('another-track.mp3', 'audioPlayer2');
*/
createAudioPlayer('The_Curator_of_Echoes.mp3', 'part1mp3');
createAudioPlayer('The_Curator_of_Echoes 2.mp3', 'part2mp3');
    </script>
</body>
</html>